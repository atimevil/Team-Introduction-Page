<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>팀 소개 페이지</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="./styles.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <script type="module" src="./main.js"></script>
</head>

<script type="module">
    // Import the functions you need from the SDKs you need

    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
    import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
    import { collection, addDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
    import { getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
    // Your web app's Firebase configuration
    // 파이어 베이스 연동
    const firebaseConfig = {
        apiKey: "AIzaSyA84CfIIHMFrm3IrXXQ1kbJbCnOJiUfMUE",
        authDomain: "teamintro-15000.firebaseapp.com",
        projectId: "teamintro-15000",
        storageBucket: "teamintro-15000.appspot.com",
        messagingSenderId: "213318217353",
        appId: "1:213318217353:web:13bda26185a1b6cea82058",
        measurementId: "G-JDLMJ32ZC0"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    $("#postingbtn").click(async function () {

        let image = $('#image').val();
        let name = $('#name').val();
        let description = $('#description').val();
        let job = $('#job').val();

        let doc = {
            'image': image,
            'name': name,
            'description': description,
            'job': job,
            
        };
        await addDoc(collection(db, "team-member"), doc);
        alert('저장 완료!');
        window.location.reload();
    })


    let docs = await getDocs(collection(db, "team-member"));
    docs.forEach((doc) => {
        let row = doc.data();

        let image = row['image'];
        let name = row['name'];
        let job = row['job'];
        let description = row['description'];
        let temp_html = `
        <ul class="team-list">
            <li>
                <div id = "${name}ProfileImg" class="profile-img tabindex="0"" >
                    <img src="${image}" alt="">
                </div>
                <div class="profile-info">
                    <h3>${name}</h3>
                    <p>${job}</p>
                </div>
            </li>
        </ul>`;
        $('#card').append(temp_html);
    });


    //쿼리
    let query = window.location.search.substr();

    $(document).ready(function () {
        $('.intro').hide();
        $('.profile-img').css('filter', 'grayscale(100%)');
        $('#johnProfileImg').css('filter', 'grayscale(0%)');
        $('#johnIntro').show();
        $('#carouselExampleIndicators').carousel({
            interval: 5000,
            ride: "carousel"
        });
    });
    $('.profile-img').click(function () {
        $('html, body').animate({
            scrollTop: $(this).offset().top - 100
        }, 0, 'linear');
    });
    $(`#${name}Img`).click(() => {
        $('.intro').hide();
        $('.profile-img').css('filter', 'grayscale(100%)');
        $(`#${name}ProfileImg`).css('filter', 'grayscale(0%)');
        $(`#${name}Intro`).toggle();
    });

</script>

<body>
    <div class="main">
        <div id="caption" class="container py-4">
            <!-- <header class="pb-3 mb-4 border-bottom"> -->
            <span class="fs-4">Team Introduction</span>
            <!-- </header> -->
            <div class="p-5 mb-4 bg-body-tertiary rounded-3">
                <div class="container-fluid py-5">
                    <h1 class="display-5 fw-bold">팀원을 소개합니다!</h1>
                    <p class="col-md-8 fs-4">우리 팀은 다양한 배경과 역량을 가진 탁월한 인재들로 구성되어 있습니다. 각자의 독특한 경험과 전문성을 바탕으로 협력하며, 동료들 간의
                        긍정적인 에너지와 지속적인 역량 강화를 추구합니다. 우리 팀의 다양성과 열정이
                        미래를 모색하는 여정에서 새로운 가능성을 열어줄 것입니다.</p>
                </div>
            </div>
        </div>
        <div id="carouselExampleIndicators" class="carousel slide">
            <div class="carousel-indicators">
                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active"
                    aria-current="true" aria-label="Slide 1"></button>
                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1"
                    aria-label="Slide 2"></button>
                <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2"
                    aria-label="Slide 3"></button>
            </div>
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img src="https://cdn.aitimes.com/news/photo/202211/148182_156488_1144.jpg" class="d-block w-100"
                        alt="slide1">
                </div>
                <div class="carousel-item">
                    <img src="https://akcongress.com/blog/wp-content/uploads/2022/05/academic_conference_shutterstock_481869205.jpg"
                        class="d-block w-100" alt="slide2">
                </div>
                <div class="carousel-item">
                    <img src="https://www.vmix.com/images/2023/solutions/meetingsheader.jpg" class="d-block w-100"
                        alt="slide3">
                </div>
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators"
                data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators"
                data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
    </div>
    <div class="container mt-5">
        <div id="card" class="row row-cols-1 row-cols-md-5 g-4">
        </div>
    </div>
    <div class="intros">
        <div id="dynamic" class="intro"> 
            <div class="intro-title">
                <strong>${job}</strong>
                <em>${name}</em>
            </div>
            <div class="intro-txt">
                <p>${description}</p>
            </div>
        </div>
    </div>
    <footer class="pt-3 mt-4 text-body-secondary border-top">
        © 2024
    </footer>
</body>

</html>